<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="build-version" content="2026-02-20_UI-V4_FINAL" />
    <title>STOCK IA PRO ‚Äî Asistente inteligente</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="stylesheet" href="styles_v2.css?v=20260220" />

    <script>
      console.log(
        "%cBUILD VERSION: 2026-02-20_UI-V4_FINAL",
        "color:#4f8cff;font-size:14px;font-weight:bold"
      );
    </script>
  </head>

  <body>
    <div id="build-version" style="display:none">2026-02-20_UI-V4_FINAL</div>

    <div class="app-shell">
      <div class="app-container">

        <!-- HEADER -->
        <header class="app-header">
          <div class="branding">
            <div class="brand-orb-mini">IA</div>
            <div>
              <div class="brand-title">STOCK IA PRO</div>
              <div class="brand-subtitle">Asistente inteligente de stock</div>
            </div>
          </div>

          <div class="header-right">
            <div class="connection-indicator">
              <span class="connection-dot" id="connection-dot"></span>
              <span>Estado conexi√≥n</span>
            </div>

            <div class="header-switch-row">
              <label class="orb-mode-switch">
                <span>Modo d√≠a</span>
                <label class="switch small">
                  <input id="toggle-dark" type="checkbox" />
                  <span class="slider"></span>
                </label>
                <span>Noche</span>
              </label>
            </div>

            <button id="help-button" class="btn-help">‚ùì</button>
          </div>
        </header>

        <!-- SEARCH + ORB -->
        <section class="search-card">
          <div id="search-status" class="search-status">Listo</div>

          <div class="search-row">
            <div class="search-input-wrapper">
              <input
                id="search-input"
                type="text"
                class="search-input"
                placeholder="Buscar art√≠culo, marca, rubro, talle, color, precio..."
                autocomplete="off"
              />
              <ul id="autocomplete-list" class="autocomplete-list"></ul>
            </div>
          </div>

          <!-- SCANNER BUTTONS -->
          <div class="scanner-buttons">
            <button id="btn-scanner-interno-1" class="scanner-button">üì∑</button>
            <button id="btn-scanner-externo-preferido" class="scanner-button">üì≤</button>
          </div>

          <!-- SCANNER MODE -->
          <div class="scanner-mode-switch">
            <label class="orb-mode-switch">
              <span>Simple</span>
              <label class="switch small">
                <input id="scanner-mode-switch" type="checkbox" />
                <span class="slider"></span>
              </label>
              <span>Completo</span>
            </label>
          </div>

          <div class="search-actions-row">
            <button id="btn-limpiar" class="orb-action-btn">üßπ</button>
            <button id="btn-copiar" class="orb-action-btn">üìã</button>
            <button id="btn-stop" class="orb-action-btn stop">‚èπ</button>
          </div>

          <div class="voice-row">
            <button id="mic-button" class="mic-btn">üé§</button>

            <label class="orb-mode-switch">
              <span>Dictado</span>
              <label class="switch small">
                <input id="modo-voz-switch" type="checkbox" />
                <span class="slider"></span>
              </label>
            </label>

            <label class="orb-mode-switch">
              <span>Manos libres</span>
              <label class="switch small">
                <input id="modo-manos-libres" type="checkbox" />
                <span class="slider"></span>
              </label>
            </label>
          </div>

          <div id="voice-status" class="voice-status">Dictado desactivado</div>

          <!-- FILTROS -->
          <div class="search-filters-row">
            <label class="solo-stock">
              <span>Solo con stock</span>
              <label class="switch">
                <input id="chk-solo-stock" type="checkbox" />
                <span class="slider"></span>
              </label>
            </label>

            <button id="btn-filtros" class="btn-secondary">Filtros</button>
          </div>

          <!-- ORB -->
          <div class="orb-zone">
            <div class="orb-actions-ring">
              <div id="orb-core" class="orb-ultra"></div>
            </div>
          </div>

          <!-- M√âTRICAS -->
          <div class="metrics-row">
            <div id="metric-articulos" class="metric-card">
              <div class="metric-label">Art√≠culos</div>
              <div class="metric-value" id="metric-articulos-value">0</div>
            </div>

            <div id="metric-pares" class="metric-card">
              <div class="metric-label">Unidades</div>
              <div class="metric-value" id="metric-pares-value">0</div>
            </div>

            <div id="metric-alertas-negativos" class="metric-card">
              <div class="metric-label">Stock negativo</div>
              <div class="metric-value" id="metric-alertas-negativos-value">0</div>
            </div>

            <div id="metric-alertas-cero" class="metric-card">
              <div class="metric-label">Sin stock</div>
              <div class="metric-value" id="metric-alertas-cero-value">0</div>
            </div>

            <div id="metric-ultima-unidad" class="metric-card">
              <div class="metric-label">√öltima unidad</div>
              <div class="metric-value" id="metric-ultima-unidad-value">0</div>
            </div>

            <div id="metric-valorizado" class="metric-card">
              <div class="metric-label">Valorizado</div>
              <div class="metric-value" id="metric-valorizado-value">$0</div>
            </div>
          </div>

          <!-- PANEL DE FILTROS -->
          <div id="filtros-panel" class="filtros-panel">
            <!-- ... (todo igual) ... -->
          </div>
        </section>

        <!-- MAIN ROW -->
        <section class="main-row">
          <!-- ... (todo igual) ... -->
        </section>

        <!-- SCANNER OVERLAY -->
        <div id="scanner-overlay" class="scanner-overlay hidden">
          <video id="scanner-video" autoplay playsinline></video>
        </div>

        <!-- FUENTE DE DATOS -->
        <!-- ... (todo igual) ... -->

        <!-- FOOTER -->
        <!-- ... (todo igual) ... -->

      </div>
    </div>

    <!-- PANEL ADMIN -->
    <!-- ... (todo igual) ... -->

    <!-- MODAL DE AYUDA -->
    <!-- ... (todo igual) ... -->

    <div id="toast" class="toast"></div>

    <!-- SCRIPTS -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- QUAGGA2 (nuevo) -->
    <script src="https://cdn.jsdelivr.net/npm/quagga2@1.2.6/dist/quagga.min.js"></script>

    <!-- SCANNER NUEVO -->
    <script src="scanner_v5_quagga.js?v=20260223"></script>

    <!-- RESTO DE TU APP -->
    <script src="app_core_v4.js?v=20260220"></script>
    <script src="ui_engine_v4.js?v=20260220"></script>
    <script src="orb_engine_v2.js?v=20260220"></script>
    <script src="orb_admin_engine.js?v=20260220"></script>
    <script src="dashboard_engine.js?v=20260220"></script>
    <script src="indicators_engine.js?v=20260220"></script>

    <script>
      window.addEventListener("DOMContentLoaded", () => {
        if (window.appCore && window.initUI) {
          initUI(appCore);
        }
      });
    </script>
  </body>
</html>
